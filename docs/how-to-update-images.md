# 📸 画像アップデート手順書

## 概要

このドキュメントでは、猫写真スライドショーアプリに新しい画像を追加する手順を説明します。

## ⚠️ 重要な制約

- **GitHubのアップロード制限**: 一度に大量の画像をプッシュするとエラーが発生します
- **解決策**: 1枚ずつアップロードするスクリプトを使用します

---

## 🔄 画像追加の基本フロー

### ユーザー（森さん）が行うこと

1. **ローカルの`albums/`フォルダに新しい画像を追加**
   - 例: `albums/nekonoe 猫永遠幻想/` に新しい写真を入れる
   - 既存のアルバムでも、新規アルバムでもOK

2. **Claude（AI）に報告**
   - 「〇〇アルバムに画像を追加しました」と伝えるだけでOK
   - 何枚追加したか、ファイル名などは不要

### Claude（AI）が自動で行うこと

1. **ローカルとGitHubリポジトリを比較**
   - 追加された画像ファイルを検出

2. **1枚ずつGitにコミット＆プッシュ**
   ```bash
   # 各画像ごとに実行
   git add albums/アルバム名/画像.jpg
   git commit -m "Add: 画像.jpg to アルバム名"
   git push
   ```

3. **GitHub Actionsが自動実行（プッシュ後）**
   - `data/images.json` の自動更新
   - 各アルバムの `manifest.json` の自動生成
   - GitHub Pagesへの自動デプロイ

---

## 📁 既存アルバムに画像を追加する場合

### 手順

1. **画像をアルバムフォルダに追加**
   ```
   albums/
   └── nekonoe 猫永遠幻想/
       ├── 既存の画像1.jpg
       ├── 既存の画像2.jpg
       └── 新しい画像.jpg  ← これを追加
   ```

2. **Claudeに報告**
   > 「猫永遠幻想アルバムに画像を追加しました」

3. **Claudeが1枚ずつアップロード**
   - 自動でGitの差分を検出
   - 1枚ずつコミット＆プッシュ
   - マニフェストは自動生成される

### 完了

- GitHub Pagesに自動反映（3-5分後）
- スライドショーで新しい画像が表示される

---

## 🆕 新しいアルバムを作成する場合

### 手順

1. **新しいアルバムフォルダを作成**
   ```
   albums/
   └── 新しいアルバム名/    ← 新規作成
       ├── 画像1.jpg
       ├── 画像2.jpg
       └── 画像3.jpg
   ```

2. **Claudeに報告**
   > 「新しいアルバム『新しいアルバム名』を作成しました」

3. **Claudeが実施すること**

   **① 画像を1枚ずつアップロード**
   - 自動でGitの差分を検出
   - 1枚ずつコミット＆プッシュ

   **② アルバム選択リストにコード追加**
   - `index.html` のアルバムチェックボックスに追加
   - `app.js` の設定にアルバム情報を追加
   - コミット＆プッシュ

### 完了

- GitHub Pagesに自動反映
- 初期設定画面にアルバムが表示される
- スライドショーで選択可能になる

---

## 🛠️ 技術的な詳細

### 使用するスクリプト

プロジェクトルートに以下のスクリプトが用意されています：

- `upload_images_one_by_one.py` - 1枚ずつアップロードする基本スクリプト
- `upload_remaining_images.py` - 残りの画像をアップロードするスクリプト

### 自動化の仕組み

#### 1. マニフェスト自動生成

`.github/workflows/update-manifest.yml` により、`albums/` 内の変更を検知すると自動実行：

```yaml
on:
  push:
    paths:
      - 'albums/**'  # albums/内の変更を検知
```

実行内容:
- `scripts/generate_manifest.py` を実行
- `data/images.json` を自動更新
- 各アルバムの `manifest.json` を自動生成
- 自動コミット＆プッシュ

#### 2. GitHub Pagesデプロイ

`.github/workflows/deploy.yml` により、プッシュ後に自動デプロイ

---

## 📋 チェックリスト

### 画像追加時

- [ ] ローカルの `albums/` フォルダに画像を追加
- [ ] Claudeに「〇〇アルバムに画像を追加しました」と報告
- [ ] Claudeが1枚ずつアップロード完了を待つ
- [ ] GitHub Pagesで反映を確認（3-5分後）

### 新規アルバム作成時

- [ ] ローカルに新しいアルバムフォルダを作成
- [ ] 画像をフォルダに追加
- [ ] Claudeに「新しいアルバム『〇〇』を作成しました」と報告
- [ ] Claudeが画像アップロード＆コード修正完了を待つ
- [ ] GitHub Pagesで反映を確認
- [ ] 初期設定画面でアルバムが選択できることを確認

---

## ⚠️ 注意事項

1. **画像フォーマット**
   - 対応形式: `.jpg`, `.jpeg`, `.png`, `.webp`, `.heic`
   - サムネイルは自動生成される

2. **ファイル名**
   - 日本語ファイル名OK
   - スペースや特殊文字も使用可能

3. **アルバムフォルダ名**
   - 日本語フォルダ名OK
   - 例: `albums/ぽんちょねこ/`

4. **Git操作**
   - ユーザー（森さん）がGit操作を覚える必要はありません
   - すべてClaudeが代行します

---

## 🎯 よくある質問

**Q: 画像を削除したい場合は？**
A: Claudeに「〇〇アルバムの〇〇.jpgを削除しました」と報告してください。同様に1枚ずつ処理します。

**Q: アルバム名を変更したい場合は？**
A: Claudeに「〇〇アルバムを△△に変更しました」と報告してください。コードの修正が必要です。

**Q: 画像が反映されるまでの時間は？**
A:
- ローカル環境: 即座（ブラウザリフレッシュで確認可能）
- GitHub Pages: 3-5分（デプロイ完了後）

**Q: エラーが出た場合は？**
A: Claudeに報告してください。ログを確認して対処します。

---

## 📞 サポート

何か問題があれば、Claude（AI）に以下の情報と共に報告してください：

- 何をしようとしたか
- エラーメッセージ（あれば）
- どのアルバムに対する操作か

---

**最終更新**: 2025-10-16
**バージョン**: 1.0
