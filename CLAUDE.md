# CLAUDE.md

## 📚 ドキュメント自動更新システム

📝 Webスライドショープロジェクト — 要件5行まとめ

GitHub Pages 上で動作する、HTML/CSS/JS構成の静的スライドショーWebアプリを作成し、テレビ・iPad・PCなどで高画質画像を表示する。

**複数のアルバム（フォルダ）**をサポートし、ユーザーが選択・シャッフル・表示時間の設定を行えるようにする。

画面上に 時計（日付・曜日・24時間制・秒付き） と、必要に応じて 天気情報（OpenWeatherMapの無料API） を重ねて表示する。

縦長画像は自動で判定し、横長画面では2枚を並べて表示するレイアウトを実装する。

認証なし・無料・軽量構成とし、画像を追加してgit pushするだけで更新が反映されるようにする。



## 🔄 作業フロー（計画書ベース）

### 基本的な作業の流れ

1. **依頼受領** → ユーザーからのタスク・要望を受け取り
2. **計画書作成** → 詳細な作業計画書（マークダウン）を作成
3. **計画提案** → 「この計画書でよろしいですか？」とユーザーに確認
4. **承認・修正** → ユーザーの承認または修正指示を受領
5. **計画実行** → 計画書のTo-Doリストに従って段階的に実行
6. **進捗管理** → 各タスク完了時に計画書のステータス更新
7. **完了報告** → 全作業完了後、結果とともに報告

### 計画書の役割

**計画書は以下を兼ねる統合ドキュメントです：**
- 作業全体の設計図
- タスク管理・進捗追跡ツール
- ユーザーとの合意記録
- 作業履歴・変更履歴

### 変更・修正対応

**計画途中での変更要求時：**
1. 現在の計画書の進捗状況を保存
2. 新しい要求を反映した計画書v2を作成
3. 「修正された計画書でよろしいですか？」と再確認
4. 承認後、新計画書に基づいて作業継続

**継続的改善プロセス：**
```
依頼 → 計画書v1 → 確認 → OK → 実行
            ↓
      修正要求 → 計画書v2 → 確認 → OK → 実行継続
                      ↓
                更なる変更 → 計画書v3 → 確認 → OK → 完了
```

## 📋 計画書作成

**計画書は `plans/` フォルダに作成し、詳細なテンプレートは `/docs/PlanTemplate.md` を参照**

### 参照すべきドキュメント

- `/docs/FigureGuide.md` - グラフ作成ガイド
- `/docs/PlanTemplate.md` - 計画書テンプレート


## 🎯 基本方針

- **品質重視**：各段階で検証を行い、問題は必ず修正してから次へ
- **再現可能性**：処理手順とパラメータを明確に記録
- **機密情報禁止**：秘匿情報の記録は厳禁

## 📁 フォルダ構造とファイル配置ルール

Claude Code は以下の構造に従ってファイルを配置してください：

### プロジェクト全体構造
```
project_root/
├── src/                     # 全スクリプトファイル
├── data/
│   ├── raw/                 # 生データ（変更禁止）
│   ├── processed/           # 処理済みデータ
│   └── docs/                # ドキュメント
├── notebooks/               # Jupyter Notebook
├── plans/                   # 作業計画書
├── reports/
│   ├── docs/               # 分析レポート
│   ├── figures/            # 生成グラフ・図表
│   └── tables/             # 統計表・データ表
├── docs/                   # 技術ドキュメント
└── CLAUDE.md               # Claude指示書
```

### ファイル配置原則

**データファイル**
- 生データ → `data/raw/`（変更厳禁）
- 処理済みデータ → `data/processed/[処理段階]/`
- 各処理段階に対応するフォルダで管理

**スクリプト・コード**
- 分析スクリプト → `src/[処理段階]/`
- Jupyter Notebook → `notebooks/`
- 実行順序が明確になる命名規則を使用

**出力ファイル**
- 作業計画書 → `plans/`
- グラフ・図表 → `reports/figures/`
- 統計表 → `reports/tables/`
- レポート文書 → `reports/docs/`

### 重要な配置ルール

1. **散らかり防止**：新しいファイルは必ず既存の構造に従って配置
2. **処理段階対応**：`src/`と`data/processed/`のフォルダ構造を統一
3. **グラフ作成時**：必ず`docs/FifureGuide.md`を参照してスタイル統一
4. **命名規則**：ファイル名に処理段階・分析種別を含める

### 禁止事項
- ルートディレクトリへの無秩序なファイル作成
- 既存構造を無視した新規フォルダ作成
- `data/raw/`の内容変更

### pythonの起動
```bash

# 3) 母艦 venv の site-packages を見るための PYTHONPATH を追記
echo 'export PYTHONPATH=$PYTHONPATH:$HOME/envs/base_ds/lib/python3.12/site-packages' \
  >> .venv/bin/activate

# 4) venv を有効化
source .venv/bin/activate             # プロンプトの先頭に (.venv) が付く

# 5) Python が見えるか確認
which python                          # → .../20250714_DRdata/.venv/bin/python
python -c "import pandas, sys; print(sys.executable); print(pandas.__version__)"
# pandas のバージョンが表示されれば成功

